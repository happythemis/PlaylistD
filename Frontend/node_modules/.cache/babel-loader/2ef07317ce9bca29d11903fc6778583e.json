{"ast":null,"code":"import _regeneratorRuntime from\"/Users/themislee/Documents/cs411finalFB/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/themislee/Documents/cs411finalFB/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/themislee/Documents/cs411finalFB/front_end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Button from'@material-ui/core/Button';import CssBaseline from'@material-ui/core/CssBaseline';import TextField from'@material-ui/core/TextField';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox';import Link from'@material-ui/core/Link';import Grid from'@material-ui/core/Grid';import Box from'@material-ui/core/Box';import Typography from'@material-ui/core/Typography';import{makeStyles}from'@material-ui/core/styles';import Container from'@material-ui/core/Container';import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableCell from'@material-ui/core/TableCell';import TableContainer from'@material-ui/core/TableContainer';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import Paper from'@material-ui/core/Paper';import Select from'@material-ui/core/Select';import MenuItem from'@material-ui/core/MenuItem';import Autocomplete from'@material-ui/lab/Autocomplete';var useStyles=makeStyles(function(theme){return{paper:{marginTop:theme.spacing(8),display:'flex',flexDirection:'column'// alignItems: 'center',\n},avatar:{margin:theme.spacing(1)// backgroundColor: theme.palette.secondary.main,\n},form:{width:'100%',// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});var MyFavSong=function MyFavSong(props){var classes=useStyles();// const [email, setEmail] = useState(\"\");\n// const [pwd, setPwd] = useState(\"\");\n// const [tried_login, setTried_login] = useState(0)\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),playlist=_useState2[0],setPlaylist=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),method_number=_useState4[0],setMethod_number=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),info_data=_useState6[0],setInfo_data=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),add_response=_useState8[0],setAdd_response=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),remove_s_id=_useState10[0],setRemove_s_id=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),remove_s_name=_useState12[0],setRemove_s_name=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),remove_response=_useState14[0],setRemove_response=_useState14[1];useEffect(function(){if(props.ls){fetch(\"/show_liked_songs?user_id=\"+props.ui).then(function(response){return response.json();}).then(function(data){setPlaylist(data['data']);});}},[]);var refresh_liked_list=function refresh_liked_list(){if(props.ls){fetch(\"/show_liked_songs?user_id=\"+props.ui).then(function(response){return response.json();}).then(function(data){setPlaylist(data['data']);});}};if(!props.ls){return/*#__PURE__*/React.createElement(\"nav\",{className:\"HomeNav\"},/*#__PURE__*/React.createElement(\"h1\",null,\" Please sign in first\"));}return/*#__PURE__*/React.createElement(Container,{component:\"main\"},/*#__PURE__*/React.createElement(Grid,{container:true,item:true,xs:12,spacing:6},/*#__PURE__*/React.createElement(Grid,{item:true,xs:3},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},\"Add Songs to My Favorite List\"),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(Select,{labelId:\"select-method-number-label\",id:\"select-method-number\",value:method_number,onChange:function onChange(e){return setMethod_number(e.target.value);}},/*#__PURE__*/React.createElement(MenuItem,{value:1},\"Add your Top 50 Songs\"),/*#__PURE__*/React.createElement(MenuItem,{value:2},\"Add a Playlist\")),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",required:true,fullWidth:true,id:\"my_uri\",label:method_number==1?\"Spotify Username\":\"Playlist URI\",name:\"my_uri\",autoComplete:\"my_uri\",autoFocus:true,value:info_data,onChange:function onChange(e){return setInfo_data(e.target.value);}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user_id,user_info,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user_id=props.ui;user_info={user_id:user_id,method_number:method_number,info_data:info_data};_context.next=4;return fetch(\"/add_liked_songs\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user_info)});case 4:response=_context.sent;if(response.ok){setAdd_response(\"Songs Added Successfully\");refresh_liked_list();}else{setAdd_response(\"Unsuccessful, please try again\");}case 6:case\"end\":return _context.stop();}}},_callee);}))},\"Add\")),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},add_response),/*#__PURE__*/React.createElement(\"form\",{className:classes.form,noValidate:true},/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h6\"},/*#__PURE__*/React.createElement(\"br\",null),\"Remove Song from the list\"),/*#__PURE__*/React.createElement(Autocomplete,{id:\"controllable-states-demo\",options:playlist,getOptionLabel:function getOptionLabel(option){return option.s_name;},renderInput:function renderInput(params){return/*#__PURE__*/React.createElement(TextField,Object.assign({},params,{label:\"Sone name\",variant:\"outlined\"}));},inputvalue:remove_s_name,onInputChange:function onInputChange(event,newInputValue){setRemove_s_name(newInputValue);}}),/*#__PURE__*/React.createElement(Button,{type:\"button\",fullWidth:true,variant:\"contained\",color:\"primary\",className:classes.submit,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var i,s_id,user_id,user_info,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:s_id=\"NONE\";i=0;case 2:if(!(i<playlist.length)){_context2.next=9;break;}if(!(remove_s_name==playlist[i].s_name)){_context2.next=6;break;}s_id=playlist[i].s_id;return _context2.abrupt(\"break\",9);case 6:i++;_context2.next=2;break;case 9:user_id=props.ui;user_info={user_id:user_id,s_id:s_id};_context2.next=13;return fetch(\"/delete_liked_songs\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(user_info)});case 13:response=_context2.sent;if(response.ok){setRemove_response(\"Songs Removed Successfully\");refresh_liked_list();setRemove_s_name(\"\");}else{setRemove_response(\"Unsuccessful, please try again\");}case 15:case\"end\":return _context2.stop();}}},_callee2);}))},\"Remove\")),/*#__PURE__*/React.createElement(Typography,{component:\"h1\",variant:\"h5\"},remove_response))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:9},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(TableContainer,{component:Paper},/*#__PURE__*/React.createElement(Table,{className:classes.table,\"aria-label\":\"simple table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Song name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Album\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Release Date\"),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},\"Artists\"))),/*#__PURE__*/React.createElement(TableBody,null,playlist.map(function(playlist){return/*#__PURE__*/React.createElement(TableRow,{key:playlist.name},/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},playlist.s_name),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},playlist.album_name),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},playlist.album_release_date),/*#__PURE__*/React.createElement(TableCell,{align:\"left\"},playlist.artist_names));}))))))));};export default MyFavSong;","map":{"version":3,"sources":["/Users/themislee/Documents/cs411finalFB/front_end/src/MyFavSong.js"],"names":["React","useState","useEffect","Button","CssBaseline","TextField","FormControlLabel","Checkbox","Link","Grid","Box","Typography","makeStyles","Container","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Select","MenuItem","Autocomplete","useStyles","theme","paper","marginTop","spacing","display","flexDirection","avatar","margin","form","width","submit","MyFavSong","props","classes","playlist","setPlaylist","method_number","setMethod_number","info_data","setInfo_data","add_response","setAdd_response","remove_s_id","setRemove_s_id","remove_s_name","setRemove_s_name","remove_response","setRemove_response","ls","fetch","ui","then","response","json","data","refresh_liked_list","e","target","value","user_id","user_info","method","headers","body","JSON","stringify","ok","option","s_name","params","event","newInputValue","s_id","i","length","table","map","name","album_name","album_release_date","artist_names"],"mappings":"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","sourcesContent":["import React, {useState, useEffect}from 'react';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Link from '@material-ui/core/Link';\nimport Grid from '@material-ui/core/Grid';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Autocomplete from '@material-ui/lab/Autocomplete';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: 'flex',\n    flexDirection: 'column',\n    // alignItems: 'center',\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    // backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: '100%', // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\n\n\nconst MyFavSong= (props) => {\n  const classes = useStyles();\n  // const [email, setEmail] = useState(\"\");\n  // const [pwd, setPwd] = useState(\"\");\n  // const [tried_login, setTried_login] = useState(0)\n  const [playlist, setPlaylist] = useState([]);\n  const [method_number, setMethod_number] = useState(1);\n  const [info_data, setInfo_data] = useState(\"\");\n  const [add_response, setAdd_response] = useState(\"\");\n  const [remove_s_id, setRemove_s_id] = useState(\"\");\n  const [remove_s_name, setRemove_s_name] = useState(\"\");\n  const [remove_response, setRemove_response] = useState(\"\");\n\n  useEffect(() => {\n    if(props.ls){\n      fetch(\"/show_liked_songs?user_id=\"+props.ui)\n      .then(response => response.json())\n      .then(data => {setPlaylist(data['data']);});\n    }\n  }, []);\n\n\n  const refresh_liked_list = () => {\n    if(props.ls){\n      fetch(\"/show_liked_songs?user_id=\"+props.ui)\n      .then(response => response.json())\n      .then(data => {setPlaylist(data['data']);});\n    }\n  }\n\n  if(!props.ls){\n    return(\n      <nav className = \"HomeNav\">\n        <h1> Please sign in first</h1>\n      </nav>\n    );\n  }\n\n  return (\n    <Container component=\"main\">\n      <Grid container item xs={12} spacing={6}>\n        <Grid item xs={3}>\n          <div className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h5\">\n              Add Songs to My Favorite List\n            </Typography>\n            <Typography component=\"h1\" variant=\"h5\">\n              <br />\n            </Typography>\n            <Select\n              labelId=\"select-method-number-label\"\n              id=\"select-method-number\"\n              value={method_number}\n              onChange={e => setMethod_number(e.target.value)}\n            >\n              <MenuItem value={1}>Add your Top 50 Songs</MenuItem>\n              <MenuItem value={2}>Add a Playlist</MenuItem>\n            </Select>\n            <form className={classes.form} noValidate>\n              <TextField\n                variant=\"outlined\"\n                margin=\"normal\"\n                required\n                fullWidth\n                id=\"my_uri\"\n                label= {method_number == 1 ? \"Spotify Username\" : \"Playlist URI\"}\n                name=\"my_uri\"\n                autoComplete=\"my_uri\"\n                autoFocus\n                value={info_data}\n                onChange={e => setInfo_data(e.target.value)}\n              />\n              <Button\n                type=\"button\"\n                fullWidth\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.submit}\n                onClick={async () => {\n                  const user_id = props.ui;\n                  const user_info = {user_id, method_number, info_data};\n                  const response = await fetch(\"/add_liked_songs\", {\n                    method: \"POST\",\n                    headers: {\n                      \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(user_info)\n                  });\n\n                  if(response.ok) {\n                    setAdd_response(\"Songs Added Successfully\");\n                    refresh_liked_list();\n                  }else{\n                    setAdd_response(\"Unsuccessful, please try again\");\n                  }\n                }}\n                >\n                Add\n              </Button>\n            </form>\n            <Typography component=\"h1\" variant=\"h5\">\n            {add_response}\n            </Typography>\n\n            <form className={classes.form} noValidate>\n              <Typography component=\"h1\" variant=\"h6\">\n                <br />\n                Remove Song from the list\n              </Typography>\n              <Autocomplete\n                id=\"controllable-states-demo\"\n                options={playlist}\n                getOptionLabel={(option) => option.s_name}\n                renderInput={(params) => <TextField {...params} label=\"Sone name\" variant=\"outlined\" />}\n                inputvalue={remove_s_name}\n                onInputChange={(event, newInputValue) => {setRemove_s_name(newInputValue);}}\n              />\n              <Button\n                type=\"button\"\n                fullWidth\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.submit}\n                onClick={async () => {\n                  var i;\n                  var s_id = \"NONE\";\n                  for (i = 0; i < playlist.length; i++){\n                    if(remove_s_name == playlist[i].s_name){\n                      s_id = playlist[i].s_id;\n                      break;\n                    }\n                  }\n                  const user_id = props.ui;\n                  const user_info = {user_id, s_id};\n                  const response = await fetch(\"/delete_liked_songs\", {\n                    method: \"POST\",\n                    headers: {\n                      \"Content-Type\": \"application/json\"\n                    },\n                    body: JSON.stringify(user_info)\n                  });\n\n                  if(response.ok) {\n                    setRemove_response(\"Songs Removed Successfully\");\n                    refresh_liked_list();\n                    setRemove_s_name(\"\")\n                  }else{\n                    setRemove_response(\"Unsuccessful, please try again\");\n                  }\n                }}\n                >\n                Remove\n              </Button>\n            </form>\n          <Typography component=\"h1\" variant=\"h5\">\n            {remove_response}\n          </Typography>\n          </div>\n        </Grid>\n        <Grid item xs={9}>\n          <div className={classes.paper}>\n          <TableContainer component={Paper}>\n              <Table className={classes.table} aria-label=\"simple table\">\n                <TableHead>\n                  <TableRow>\n                    {/* <TableCell align=\"right\">Song Order</TableCell> */}\n                    <TableCell align=\"left\">Song name</TableCell>\n                    <TableCell align=\"left\">Album</TableCell>\n                    <TableCell align=\"left\">Release Date</TableCell>\n                    <TableCell align=\"left\">Artists</TableCell>\n\n                  </TableRow>\n                </TableHead>\n                <TableBody>\n                  {playlist.map((playlist) => (\n                    <TableRow key={playlist.name}>\n                      <TableCell align=\"left\">{playlist.s_name}</TableCell>\n                      <TableCell align=\"left\">{playlist.album_name}</TableCell>\n                      <TableCell align=\"left\">{playlist.album_release_date}</TableCell>\n                      <TableCell align=\"left\">{playlist.artist_names}</TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </TableContainer>\n          </div>\n        </Grid>\n        \n      </Grid>\n    </Container>\n  );\n}\nexport default MyFavSong;"]},"metadata":{},"sourceType":"module"}